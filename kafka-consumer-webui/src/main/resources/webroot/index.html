<html>
<head>
  <script src="jquery-3.1.1.min.js"></script>
  <script src="sockjs.min.js"></script>
  <script src="vertx-eventbus.js"></script>
<body>
<h1>Apache Kafka messages dashboard</h1>

<button id="seekToBegin">from begin</button>
<input id="offset"/><button id="seek">seek</button>
<div id="messages"></div>

<script>
    var eb = new EventBus("http://" + location.host + "/eventbus");
    eb.onopen = function() {
      console.log("open");
      eb.registerHandler("dashboard", function(error, message) {
        console.log(message);
        $('#messages').prepend('<div>' + message.body + '</div>');
      });
    };

    $('#seekToBegin').click(function() {
      $('#messages').empty();
      eb.publish("config", "seektobegin");
    });

    $('#seek').click(function() {
      $('#messages').empty();

      var offset = $('#offset').val();
      var headers = {
        "offset" : offset
      }

      eb.publish("config", "seek", headers);
    });
  </script>



</body>
</html>
